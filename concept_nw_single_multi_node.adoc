---
sidebar: sidebar 
permalink: concept_nw_single_multi_node.html 
keywords: ontap select, single node network configuration, multinode network configuration 
summary: ONTAP Select admite configuraciones de red de nodo único y de nodo múltiple. 
---
= ONTAP Select configuraciones de red de uno o varios nodos
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ONTAP Select admite configuraciones de red de nodo único y de nodo múltiple.



== Configuración de red de nodo único

Las configuraciones de ONTAP Select de nodo único no requieren la red interna de ONTAP , porque no hay tráfico de clúster, HA o espejo.

A diferencia de la versión multinodo del producto ONTAP Select , cada VM ONTAP Select contiene tres adaptadores de red virtuales, presentados a los puertos de red ONTAP e0a, e0b y e0c.

Estos puertos se utilizan para proporcionar los siguientes servicios: administración, datos y LIF entre clústeres.

.KVM
ONTAP Select puede implementarse como un clúster de un solo nodo. El host del hipervisor incluye un conmutador virtual que proporciona acceso a la red externa.

.ESXi
La relación entre estos puertos y los adaptadores físicos subyacentes se puede ver en la siguiente figura, que representa un nodo de clúster ONTAP Select en el hipervisor ESX.

*Configuración de red del clúster ONTAP Select de nodo único*

image:DDN_03.jpg["Configuración de red del clúster ONTAP Select de un solo nodo"]


NOTE: Si bien dos adaptadores son suficientes para un clúster de un solo nodo, aún se requiere la agrupación de NIC.



=== Asignación de LIF

Como se explica en la sección de asignación de LIF multinodo de este documento, ONTAP Select utiliza espacios IP para separar el tráfico de red del clúster del tráfico de datos y de administración. La versión de nodo único de esta plataforma no incluye una red de clúster. Por lo tanto, no hay puertos en el espacio IP del clúster.


NOTE: Los LIF de administración de clústeres y nodos se crean automáticamente durante la configuración del clúster de ONTAP Select . Los LIF restantes se pueden crear después de la implementación.



=== Gestión y datos de LIF (e0a, e0b y e0c)

Los puertos ONTAP e0a, e0b y e0c se delegan como puertos candidatos para LIF que transportan los siguientes tipos de tráfico:

* Tráfico de protocolo SAN/NAS (CIFS, NFS e iSCSI)
* Tráfico de administración de clústeres, nodos y SVM
* Tráfico entre clústeres (SnapMirror y SnapVault)




== Configuración de red multinodo

La configuración de red multinodo ONTAP Select consta de dos redes.

Se trata de una red interna, responsable de proporcionar servicios de replicación interna y de clúster, y una red externa, responsable de proporcionar servicios de acceso y gestión de datos. El aislamiento de extremo a extremo del tráfico que fluye dentro de estas dos redes es fundamental para crear un entorno adecuado para la resiliencia del clúster.

Estas redes se representan en la siguiente figura, que muestra un clúster ONTAP Select de cuatro nodos ejecutándose en una plataforma VMware vSphere. Los clústeres de seis y ocho nodos tienen una disposición de red similar.


NOTE: Cada instancia de ONTAP Select reside en un servidor físico independiente. El tráfico interno y externo se aísla mediante grupos de puertos de red independientes, asignados a cada interfaz de red virtual, lo que permite que los nodos del clúster compartan la misma infraestructura de conmutación física.

*Descripción general de la configuración de una red de clúster multinodo ONTAP Select *

image:DDN_01.jpg["Descripción general de la configuración de una red de clúster multinodo de ONTAP Select"]

Cada máquina virtual ONTAP Select contiene siete adaptadores de red virtuales, presentados a ONTAP como un conjunto de siete puertos de red, desde e0a hasta e0g. Aunque ONTAP trata estos adaptadores como NIC físicas, en realidad son virtuales y se asignan a un conjunto de interfaces físicas a través de una capa de red virtualizada. Por lo tanto, cada servidor de alojamiento no requiere seis puertos de red físicos.


NOTE: No se admite agregar adaptadores de red virtuales a la VM ONTAP Select .

Estos puertos están preconfigurados para proporcionar los siguientes servicios:

* e0a, e0b y e0g. Gestión y datos de LIF
* e0c, e0d. LIF de red de clúster
* e0e. RSM
* e0f. Interconexión HA


Los puertos e0a, e0b y e0g residen en la red externa. Si bien los puertos e0c a e0f realizan diversas funciones, en conjunto conforman la red Select interna. Al tomar decisiones de diseño de red, estos puertos deben ubicarse en una única red de capa 2. No es necesario separar estos adaptadores virtuales en diferentes redes.

La relación entre estos puertos y los adaptadores físicos subyacentes se ilustra en la siguiente figura, que muestra un nodo de clúster ONTAP Select en el hipervisor ESX.

*Configuración de red de un solo nodo que forma parte de un clúster ONTAP Select de varios nodos*

image:DDN_02.jpg["Configuración de red de un solo nodo que forma parte de un clúster ONTAP Select de varios nodos"]

La segregación del tráfico interno y externo entre diferentes NIC físicas evita la introducción de latencias en el sistema debido al acceso insuficiente a los recursos de red. Además, la agregación mediante la agrupación de NIC garantiza que la falla de un único adaptador de red no impida que el nodo del clúster ONTAP Select acceda a la red correspondiente.

Tenga en cuenta que tanto los grupos de puertos de red externa como los de red interna contienen los cuatro adaptadores NIC de forma simétrica. Los puertos activos del grupo de puertos de red externa son los puertos en espera de la red interna. Por el contrario, los puertos activos del grupo de puertos de red interna son los puertos en espera del grupo de puertos de red externa.



=== Asignación de LIF

Con la introducción de los espacios IP, los roles de puerto de ONTAP quedaron obsoletos. Al igual que las matrices FAS , los clústeres ONTAP Select contienen un espacio IP predeterminado y un espacio IP de clúster. Al colocar los puertos de red e0a, e0b y e0g en el espacio IP predeterminado y los puertos e0c y e0d en el espacio IP de clúster, estos puertos se han aislado y no pueden alojar LIFs no pertenecientes a su red. Los puertos restantes del clúster ONTAP Select se consumen mediante la asignación automática de interfaces que proporcionan servicios internos. No se exponen a través del shell de ONTAP , como ocurre con las interfaces de interconexión RSM y HA.


NOTE: No todos los LIF son visibles a través del shell de comandos de ONTAP . La interconexión HA y las interfaces RSM están ocultas a ONTAP y se utilizan internamente para proporcionar sus respectivos servicios.

Los puertos de red y los LIF se explican en detalle en las siguientes secciones.



=== Gestión y datos de LIF (e0a, e0b y e0g)

Los puertos ONTAP e0a, e0b y e0g se delegan como puertos candidatos para LIF que transportan los siguientes tipos de tráfico:

* Tráfico de protocolo SAN/NAS (CIFS, NFS e iSCSI)
* Tráfico de administración de clústeres, nodos y SVM
* Tráfico entre clústeres (SnapMirror y SnapVault)



NOTE: Los LIF de administración de clústeres y nodos se crean automáticamente durante la configuración del clúster de ONTAP Select . Los LIF restantes se pueden crear después de la implementación.



=== LIF de red de clúster (e0c, e0d)

Los puertos e0c y e0d de ONTAP se delegan como puertos locales para las interfaces del clúster. Dentro de cada nodo de clúster de ONTAP Select , se generan automáticamente dos interfaces de clúster durante la configuración de ONTAP mediante direcciones IP locales de enlace (169.254.xx).


NOTE: A estas interfaces no se les pueden asignar direcciones IP estáticas y no se deben crear interfaces de clúster adicionales.

El tráfico de red del clúster debe fluir a través de una red de capa 2 sin enrutamiento y de baja latencia. Debido a los requisitos de rendimiento y latencia del clúster, se espera que el clúster ONTAP Select esté ubicado físicamente cerca (por ejemplo, en un solo centro de datos con varios paquetes). No se admiten configuraciones de clústeres extendidos de cuatro, seis u ocho nodos separando los nodos de alta disponibilidad (HA) en una WAN o a distancias geográficas considerables. Se admite una configuración extendida de dos nodos con un mediador.

Para más detalles, consulte la secciónlink:reference_plan_best_practices.html#two-node-stretched-ha-metrocluster-sds-best-practices["Mejores prácticas para HA extendida de dos nodos (MetroCluster SDS)"] .


NOTE: Para garantizar el máximo rendimiento del tráfico de red del clúster, este puerto de red está configurado para usar tramas jumbo (de 7500 a 9000 MTU). Para un correcto funcionamiento del clúster, verifique que las tramas jumbo estén habilitadas en todos los conmutadores virtuales y físicos ascendentes que proporcionan servicios de red internos a los nodos del clúster ONTAP Select .



=== Tráfico RAID SyncMirror (e0e)

La replicación síncrona de bloques entre los nodos asociados de alta disponibilidad se realiza mediante una interfaz de red interna ubicada en el puerto de red e0e. Esta funcionalidad se realiza automáticamente mediante las interfaces de red configuradas por ONTAP durante la configuración del clúster y no requiere configuración por parte del administrador.


NOTE: El puerto e0e está reservado por ONTAP para el tráfico de replicación interna. Por lo tanto, ni el puerto ni el LIF alojado son visibles en la CLI de ONTAP ni en el Administrador del Sistema. Esta interfaz está configurada para usar una dirección IP local de enlace generada automáticamente y no se admite la reasignación de una dirección IP alternativa. Este puerto de red requiere el uso de tramas jumbo (7500 a 9000 MTU).



=== Interconexión HA (e0f)

Las cabinas FAS de NetApp utilizan hardware especializado para transferir información entre pares de alta disponibilidad (HA) en un clúster ONTAP . Sin embargo, los entornos definidos por software no suelen disponer de este tipo de equipo (como dispositivos InfiniBand o iWARP), por lo que se necesita una solución alternativa. Si bien se consideraron varias posibilidades, los requisitos de ONTAP para el transporte de interconexión exigían que esta funcionalidad se emulara en software. Como resultado, dentro de un clúster ONTAP Select , la funcionalidad de la interconexión de alta disponibilidad (tradicionalmente proporcionada por hardware) se ha integrado en el sistema operativo, utilizando Ethernet como mecanismo de transporte.

Cada nodo ONTAP Select está configurado con un puerto de interconexión de alta disponibilidad (e0f). Este puerto aloja la interfaz de red de interconexión de alta disponibilidad, responsable de dos funciones principales:

* Duplicación del contenido de NVRAM entre pares HA
* Envío y recepción de información de estado de HA y mensajes de latido de red entre pares de HA


El tráfico de interconexión HA fluye a través de este puerto de red utilizando una única interfaz de red mediante la superposición de tramas de acceso directo a memoria remota (RDMA) dentro de paquetes Ethernet.


NOTE: De forma similar al puerto RSM (e0e), ni el puerto físico ni la interfaz de red alojada son visibles para los usuarios desde la CLI de ONTAP ni desde el Administrador del Sistema. Por lo tanto, la dirección IP de esta interfaz no se puede modificar ni el estado del puerto. Este puerto de red requiere el uso de tramas jumbo (7500 a 9000 MTU).
